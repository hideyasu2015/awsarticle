# Railsの環境構築

## 本章の目的：


- すでに作成してあるRailsプロジェクトと GitHub からpullしてくる方法をやってみます。
- おそらく初めのRailsアプリはDBの設定が Sqltite3 になっているので、DBを変更する設定もやってみます。



***

### 本章では、前章で構築したRailsの環境に自分で作成した、Railaアプリケーションをデプロイします。

デプロイというのは、アプリケーションが、ネットワーク上で利用できるようにすることを指します。  

サーバー上で、ソースが正しいだけでなく、いろんな環境がキチンと動いていないといけない。  

環境を含めて、利用できるようにすることをデプロイといいます。  

#### GitHubからpullしてくる

自分のソースを上げているGitHubからpullしてきましょう。
ここでは、tech-boostのrailsアプリをpullして見ます。
各自のリポジトリの場所により、アドレスは変更になります。
各自読み替えてください。

![図1. GitHub](19-1.png)
<hr>
<br />
<br />

```
$ git clone https://github.com/[自分のリポジトリ].git
```

#### bundler を利用したgemの一括インストール

```
$ bundle exec install

//===
rbenv: version `2.4.1' is not installed (set by /home/ec2-user/rails_app/techboost-rails/.ruby-version)
```
あれれどうしたことでしょう？
どうやらこのプロジェクトではrubyの2.4.1を利用しているみたいですね。

念の為Gemfileを見てみます。

```
$ more Gemfile


//===
ruby '2.4.1'

# Bundle edge Rails instead: gem 'rails', github: 'rails/rails'
gem 'rails', '~> 5.2.1'
```

rubyの2.4.1とrailsの5.2.1を利用しているようです。

####ruby 2.4.1をインストールします。
rbenvを入れているので簡単です。
インストールできる一覧を表示

```
$ rbenv install --list

```

#### 2.4.1がありましたのでインストールします。
```
$ rbenv install -v 2.4.1
```

#### 再読込
これはパッケージ等をインストールした際に、ハッシュテーブルからコマンドをよびだしているので、パスを通していても
見つからない場合があります。
なので保険のためにコマンドをうちます。

```
$ rbenv rehash
```

#### rbenvのバージョンを確認

```
$ rbenv versions

//===
* 2.4.1 (set by /home/ec2-user/rails_app/techboost-rails/.ruby-version)
  2.5.3
```

前章では2.5.3をグローバルにしましたね。
このフォルダの中では2.4.1が使われているということです。
#### デプロイするので2.4.1　をグローバルにしましょう!

```
$ rbenv global 2.4.1


//===
* 2.4.1 (set by /home/ec2-user/rails_app/techboost-rails/.ruby-version)
  2.5.3
```

#### bundlerのインストール

```
$ gem install bundler
```

#### bundlerを利用してgemをインストールします

```
$ bundle install

//===
エラー
An error occurred while installing pg (1.1.3), and Bundler cannot continue.
Make sure that `gem install pg -v '1.1.3' --source 'https://rubygems.org/'` succeeds
before bundling.
```

これは gem pg がないと言っています。
DBを postgres に設定しているみたいですね。
今回は MySQLを利用しますので設定を変更します。

#### まずGemfileを見てみましょう

```
$ less Gemfile

```
lessというのはファイルの中身を表示します。
スクロールもします。
q ボタンを入力するまで閉じません。
便利です。

???
ここからgemの変更DB変更から




